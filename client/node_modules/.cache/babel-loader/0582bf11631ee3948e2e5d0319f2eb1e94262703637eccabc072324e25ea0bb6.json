{"ast":null,"code":"var _jsxFileName = \"/home/sndpk/Development/code/phase-5/school-system/client/src/components/ManageEnrollments.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ManageEnrollments() {\n  _s();\n  const [enrollments, setEnrollments] = useState([]);\n  const [isLoading, setLoading] = useState(true);\n  useEffect(() => {\n    fetch('/approve_enrollments').then(response => response.json()).then(data => {\n      setEnrollments(data);\n      setLoading(false);\n    });\n  }, []);\n  function handleApproval(response) {\n    const approved = {\n      \"approved\": true\n    };\n    fetch(`/enrollments/${response.id}`, {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(approved, null, 2)\n    }).then(response => response.json()).then(() => {\n      setEnrollments(enrollments.filter(enrollment => enrollment.id !== response.id));\n    });\n  }\n  let mappedEnrollments = [];\n  if (enrollments.length > 0) {\n    mappedEnrollments = enrollments.map(enrollment => {\n      return /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [enrollment.student.first_name, \" \", enrollment.student.last_name, \" - \", /*#__PURE__*/_jsxDEV(Link, {\n          to: `/courses/${enrollment.course_id}`,\n          children: enrollment.course.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 86\n        }, this), \"  \", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleApproval(enrollment),\n          children: \"Approve\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 27\n        }, this)]\n      }, enrollment.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 17\n      }, this);\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"managed-div\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Manage Enrollments\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: mappedEnrollments\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 9\n  }, this);\n}\n_s(ManageEnrollments, \"uizVhSptyB0UbBXZnT1V4WAjqe4=\");\n_c = ManageEnrollments;\nexport default ManageEnrollments;\nvar _c;\n$RefreshReg$(_c, \"ManageEnrollments\");","map":{"version":3,"names":["useState","useEffect","Link","jsxDEV","_jsxDEV","ManageEnrollments","_s","enrollments","setEnrollments","isLoading","setLoading","fetch","then","response","json","data","handleApproval","approved","id","method","headers","body","JSON","stringify","filter","enrollment","mappedEnrollments","length","map","children","student","first_name","last_name","to","course_id","course","name","fileName","_jsxFileName","lineNumber","columnNumber","onClick","className","_c","$RefreshReg$"],"sources":["/home/sndpk/Development/code/phase-5/school-system/client/src/components/ManageEnrollments.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport { Link } from 'react-router-dom'\n\nfunction ManageEnrollments() {\n    const [enrollments, setEnrollments] = useState([])\n    const [isLoading, setLoading] = useState(true)\n\n    useEffect(() => {\n        fetch('/approve_enrollments')\n           .then(response => response.json())\n           .then((data) => {\n                setEnrollments(data)\n                setLoading(false)\n            })\n    }, [])\n\n    function handleApproval(response) {\n        const approved = {\"approved\": true}\n        fetch(`/enrollments/${response.id}`, {\n            method: 'PATCH',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(approved, null, 2)\n        })\n           .then(response => response.json())\n           .then(() => {\n                setEnrollments(enrollments.filter(enrollment => enrollment.id!== response.id))\n            })\n    }\n\n    let  mappedEnrollments = []\n\n    if (enrollments.length > 0) {\n        mappedEnrollments = enrollments.map((enrollment) => {\n            return (\n                <li key={enrollment.id}>\n                    {enrollment.student.first_name} {enrollment.student.last_name} - <Link to={`/courses/${enrollment.course_id}`}>{enrollment.course.name}</Link>\n                    {\"  \"}<button onClick={() => handleApproval(enrollment)}>Approve</button>\n                </li>\n            )\n        })\n    }\n\n    return (\n        <div className=\"managed-div\">\n            <h3>Manage Enrollments</h3>\n            <ul>\n                {mappedEnrollments}\n            </ul>\n        </div>\n    )\n}\n\nexport default ManageEnrollments;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}